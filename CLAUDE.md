# 공통 규칙 
- 사용자가 질문하면 먼저 단계별로 계획을 세우고 답변하세요
- Let's Think Step By Step 
- 항상 올바르고 모범적인 코드, DRY 원칙 (중복을 피하는 코드)을 지키는 코드, 버그 없는 코드를 작성하세요
- 코드를 처음 보는 사람도 이해할 수 있게 가독성 높은 코드를 작성하세요 
- 성능을 고려한 코드를 작성하세요
- 유지보수성 높은 코드를 작성하세요
- 요청한 기능은 완전히 구현하세요
- 코드는 간결하게 작성하세요
- 모르는 경우 "모릅니다", "알수 없습니다" 라고 답하고, 만약 추가적인 정보가 필요하다면 사용자에게 질문해서 할루시네이션 현상이 발생하지 않게 해주세요
- 사용자가 주니어 개발자라고 가정하고 코드에 대한 자세한 설명을 모든 답변에 포함하세요
- 모든 답변은 한국어로 대답하세요

---
# 비즈니스 정책 
## 개요 
- 헬스장 관리 웹사이트의 주 사용자는 헬스장,필라테스 등의 사업장의 사장님이다. 
	- 사용자는 여러개의 사업장을 관리할 수 있다. 
- 해당 웹사이트에서는 사업장 매출관리, 고객 관리 기능을 제공한다.
- 사용자의 계정은 시스템 초기 설치 단계에서 개발자가 생성해준다. (회원가입 기능 없음)
- 주요 기능은 다음과 같다 
	- 로그인 
	- 대시보드
		- 마스터 권한 대시보드 
		- 일반 권한 대시보드 
	- 회원관리
		- 회원 생성 
		- 회원 조회
	- 일일권 관리
		- 일일권 등록 
		- 일일권 조회
	- 문자메시지 
	- 락커룸 관리 
	- 상품관리 
	- 캘린더 관리 
	- 직원 관리 
	- 커뮤니티 
	- 통계
- 웹사이트에서는 일반권한 모드와 마스터 권한 모드에 따라 기능을차별적으로 제공한다.
	- 일반권한은 아래와 같은 기능만 제공한다.
		- 일반권한 대시보드 
		- 회원관리 
		- 일일권 관리
		- 락커룸 관리 

---
## 1. 로그인

### 1.1. 일반 로그인
- 서비스 설치 시 제공받은 사용자의 ID/PW를 통해 로그인한다. 
### 1.2. 비밀번호 찾기
- 가입 시 입력한 이메일과 핸드폰 번호를 통해 비밀번호를 찾을 수 있다.

---


## 2. 대시보드 
- 대시보드는 마스터 권한, 일반 권한 두가지로 나뉜다.
- 권한 변경시에는 계정 비밀번호를 입력해서 변경할 수 있다.
### 2.1. 마스터 권한 대시보드
- 일 매출액, 월 매출액, 오늘 방문자, 이번주 방문자 수를 보여준다.
	- 일 매출은 전날 대비 증감 퍼센테이지를 보여준다.
	- 오늘 방문자는 어제 대비 증감 퍼센테이지를 보여준다.
	- 이번주 방문자는 지난주 대비 증감 퍼센테이지를 보여준다.
- 일별, 월별 매출 통계 그래프형식으로 보여준다.
- 일별, 월별  매출의 구성 별 비율을 보여준다 (회원권 / 개인 레슨 이용권 / 일일권)
- 최근 7일간 방문자 추이를 회원권/일일권을 구분하여 그래프 형식으로 보여준다.

### 2.2. 일반 권한 대시보드 
- 총 회원수, 만료임박 회원권 수, 만료임박 PT회원 수를 지난달 대비 증감 퍼센테이지와 함께 보여준다.
- 일별, 주별 방문자 수 요약 그래프를 보여준다.
- 월별 캘린더를 보여주고 등록된 일정을 보여준다. 일정이 있는 일자를 클릭하면 상세 일정을 팝업형태로 보여준다.

## 3. 회원 관리
### 3.1. 회원 목록 조회
- 전체회원 수, 활성 회원 수, 만료임박 회원 수, 만료된 회원 수를 보여준다.
- 각 회원 별로 회원 사진 썸네일, 회원 이름, 회원 구분 뱃지(개인레슨, 헬스, 필라테스 등), 회원권 등록일, 회원권 만료일, 만료일 까지 남은 일수, 회원 상태(활성, 만료임박, 만료), 출석률 퍼센테이지를 보여준다. 
- 회원 번호 / 이름 / 연락처로 검색할 수 있는 검색창을 제공한다.
- 필터&정렬 조건 설정 기능을 제공한다. 필터 기능으로는 회원 상태 별, 회원 구분 별로 필터링 할 수 있고, 정렬 기능으로는 이름순, 등록일순,만료일순,출석률순,회원 상태순 정렬 기능을 제공한다.
- 회원 목록은 10명씩 페이징해서 보여준다. 
- 특정 회원을 선택하면 회원 상세 페이지로 이동한다.

### 3.2. 회원 상세
- 회원 상세 페이지에는 회원 기본정보, 이용권정보, 출석 정보, 결제 / 정지 내역 정보를 보여준다. 
- 회원 기본 정보에는 회원 사진, 이름, 회원번호, 회원 구분 뱃지 (개인레슨, 헬스, 필라테스 등), 생년월일 및 만나이, 성별, 핸드폰 번호, 이메일, 앱이용 여부 뱃지(사용,미사용) , 주소, 특이사항 메모, 문자 수신동의 (동의,미동의)를 보여준다.

#### 3.2.1. 이용권 정보
- 이용권 정보로는 등록된 헬스장 이용권 정보, 개인레슨 이용권 정보, 락커 이용권 정보, 기타 이용권 정보가 있고 각각 아래와 같이 정보를 보여준다.
	1) 헬스장 이용권 : 상품명, 남은 기간
	2) 개인레슨 이용권 : 상품명, 담당 직원명, 남은 횟수 및 기간
	3) 락커 이용권 : 상품명, 남은 기간, 락커번호, 특이사항 메모
	4) 기타 이용권 : 상품명, 사용기간, 사용 상태
- 기타 이용권은 여러개를 중복 등록 할 수 있고, 나머지 이용권은 1개만 등록 가능하다.
- 이용권이 만료된 경우 이용권 내역에서 제거된다.
- 사용중인 이용권이 없다면 신규등록 버튼을 통해 신규등록 팝업을 보여주고, 사용중인 이용권이 있다면 클릭 하여 상세 정보 팝업을 보여준다.
	- 이용권 신규등록 팝업에는 다음과 같은 정보를 입력 받는다.
		1) 헬스장 이용권 : 구매 상품 (ex.헬스장 이용권 1개월) , 서비스 시작일자, 상품 상담직원, 결제 일자 & 시간 , 결제 수단, 구매 목적 (ex. 체력증진, 다이어트) , 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 특이사항 메모 
		2) 개인레슨 이용권 : 구매 상품 (ex.개인 레슨 10회 ) , 서비스 시작일자, 상품 상담직원, 담당 강사,  결제 일자 & 시간 , 결제 수단, 구매 목적 (ex. 체력증진, 다이어트) , 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 특이사항 메모 
		3) 락커 이용권 : 구매 상품 (ex. 락커 1개월),  서비스 시작일자, 상품 상담직원, 담당 강사,  결제 일자 & 시간 , 결제 수단, 구매 목적 (ex. 체력증진, 다이어트) , 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 락커 번호, 특이사항 메모 
			- 이때 락커 번호는 락커룸 관리에 있는 화면을 보여줘서 비어있는 락커를 선택할 수 있도록 한다.
		4) 기타 이용권 : 구매 상품 (ex. 운동복 상의 ) , 서비스 시작일자, 상품 상담직원, 담당 강사,  결제 일자 & 시간 , 결제 수단, 구매 목적 (ex. 체력증진, 다이어트) , 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 특이사항 메모 
  
  - 만약 신규 등록 하려는데 해당 사업장에 등록된 상품이 없다면 "등록된 상품이 없습니다." 화면을 보여준다.
  - 이용권 상세 정보 팝업에는 다음과 같은 정보를 보여준다. 
    1) 헬스장 이용권 
      - 상품/결제 정보 : 구매 상품 (ex.헬스장 이용권 1개월) , 서비스 시작일, 서비스 종료일, 상품 상담직원, 결제 일시 , 결제 수단,  상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 구매 목적 (ex. 체력증진, 다이어트), 특이사항 메모 
      - 계약서 : 영수증, 계약서 등의 사진을 첨부하고, 등록된 사진을 조회할 수 있다.
      - 이용정지 : 정지 시작일, 정지 종료일, 정지 사유, 정지 상태를 보여주고, 만약 이용정지 기록이 없다면 "이용정지 기록이 없습니다" 화면을 보여준다.
      - 수정 기록 : 수정일자, 수정 사유, 수정 내용, 수정자를 보여주고 만약 수정기록이 없다면 "수정 기록이 없습니다" 화면을 보여준다.
    2) 개인레슨 이용권 
      - 상품/결제 정보 : 구매 상품 (ex.개인 레슨 10회 ) , 서비스 시작일자, 서비스 종료일, 상품 상담직원, 담당 강사, 결제 일시 , 결제 수단 , 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 구매 목적 (ex. 체력증진, 다이어트), 특이사항 메모 
      - 계약서 : 영수증, 계약서 등의 사진을 첨부하고, 등록된 사진을 조회할 수 있다.
      - 이용정지 : 정지 시작일, 정지 종료일, 정지 사유, 정지 상태를 보여주고, 만약 이용정지 기록이 없다면 "이용정지 기록이 없습니다" 화면을 보여준다.
      - 수정 기록 : 수정일자, 수정 사유, 수정 내용, 수정자를 보여주고 만약 수정기록이 없다면 "수정 기록이 없습니다" 화면을 보여준다.
    3) 락커 이용권 
      - 상품/결제 정보 : 구매 상품 (ex. 락커 1개월),  서비스 시작일자, 서비스 종료일, 상품 상담직원, 락커 현황 (락커리스트, 내가 선택한 락커), 결제 일시 , 결제 수단, 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 구매목적, 특이사항 메모 
      - 계약서 : 영수증, 계약서 등의 사진을 첨부하고, 등록된 사진을 조회할 수 있다.
      - 이용정지 : 정지 시작일, 정지 종료일, 정지 사유, 정지 상태를 보여주고, 만약 이용정지 기록이 없다면 "이용정지 기록이 없습니다" 화면을 보여준다.
      - 수정 기록 : 수정일자, 수정 사유, 수정 내용, 수정자를 보여주고 만약 수정기록이 없다면 "수정 기록이 없습니다" 화면을 보여준다.
    4) 기타 이용권 
      - 상품/결제 정보 : 구매 상품 (ex. 운동복 상의 ) , 서비스 시작일자, 서비스 종료일, 상품 상담직원,  결제 일시 , 결제 수단, 상품 금액, 실제 결제 금액, 상품 담당자 매출 실적, 미수금, 구매목적, 특이사항 메모 
      - 계약서 : 영수증, 계약서 등의 사진을 첨부하고, 등록된 사진을 조회할 수 있다.
      - 이용정지 : 정지 시작일, 정지 종료일, 정지 사유, 정지 상태를 보여주고, 만약 이용정지 기록이 없다면 "이용정지 기록이 없습니다" 화면을 보여준다.
      - 수정 기록 : 수정일자, 수정 사유, 수정 내용, 수정자를 보여주고 만약 수정기록이 없다면 "수정 기록이 없습니다" 화면을 보여준다.

#### 3.2.2. 출석 현황
- 회원의 출석 현황을 보여준다. 
  - 전체 출석률을 퍼센테이지로 보여주고 80프로 이상이면 우수, 40프로 이상이면 보통, 40프로 미만이면 미흡으로 표시한다. 
  - 최근 30일 동안의 방문횟수를 보여준다.
  - 최근 90일 동안의 방문횟수를 보여준다.
  - 출석 캘린더를 통해 출석한날과 미출석한 날을 시각적으로 보여준다. 
  - 출석 기록 테이블을 통해 날짜/ 출석여부 / 입장 시간을 보여주고, 시작일 종료일을 설정해 특정 기간의 출석기록을 조회할 수 있게 해준다. 
    - 출석 기록 목록은 10개씩 페이징해서 보여준다. 

#### 3.2.3. 결제 및 정지 내역
- 회원의 결제 및 정지 내역을 보여준다. 
  - 결제 내역에는 총 결제 금액, 총 결제 건수, 완료된 결제건수를 보여준다.
  - 결제 내역에는 테이블을 통해 결제 이력을 보여주고 결제 목록에는 결제일, 상품 시작일, 상품 구분(ex. 개인레슨, 헬스, 락커, 기타), 상품명, 결제금액, 결제상태(완료,대기,취소)를 보여준다.
  - 결제 이력은 최신 결제일 순으로 정렬되어 보여주고 10개씩 페이징해서 보여준다. 
  - 정지 기록에는 정지 일시, 정지 기간, 정지 사유, 승인 담당자를 보여준다.
  - 정지 기록은 최신 정지일 순으로 정렬되어 보여주고 10개씩 페이징해서 보여준다. 

#### 3.2.4. 정지 등록
- 회원 상세 페이지에서 회원권을 정지할 수 있다. 
  - 정지 등록 버튼을 누르면 "회원권 정지 등록" 팝업이 뜨고 정지 기간, 정지 사유를 입력받아서 회원권을 정지시킬 수 있다. 만약 활성화된 회원권이 없다면 "활성화된 회원권이 없습니다" 화면을 띄워준다 

#### 3.2.5. 회원 정보 수정 
- 회원 정보 수정 버튼을 누르면 회원 정보 수정 팝업을 띄우고 회원 정보를 수정할 수 있다.
  - 회원명, 핸드폰 번호, 이메일주소, 생년월일, 성별, 담당 트레이너, 주소, 트레이너 메모, 마케팅 정보 수신 동의 여부를 수정할 수 있다.
  - 만약 개인레슨 이용권이 없다면 담당 직원은 비활성화 되어 수정할 수 없다.


## 9. 기타
### 9.1. 마이페이지
### 9.2. 권한 변경 
### 9.3. 사업장 변경
### 9.4. 로그아웃 